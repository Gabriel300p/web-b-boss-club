# üèóÔ∏è Arquitetura do Sistema

> **Documenta√ß√£o t√©cnica completa** da arquitetura do Template Default

---

## üìã **Vis√£o Geral**

O Template Default √© uma **aplica√ß√£o web moderna** constru√≠da com foco em:
- ‚úÖ **Escalabilidade** - Suporta crescimento org√¢nico
- ‚úÖ **Manutenibilidade** - C√≥digo limpo e bem estruturado
- ‚úÖ **Performance** - Otimizado para velocidade
- ‚úÖ **Developer Experience** - Ferramental moderno
- ‚úÖ **Type Safety** - TypeScript rigoroso

---

## üéØ **Princ√≠pios Arquiteturais**

### 1. **üì¶ Modularidade por Features**
```
Cada feature √© um m√≥dulo independente e autocontido
‚îú‚îÄ‚îÄ components/     # Componentes espec√≠ficos da feature  
‚îú‚îÄ‚îÄ hooks/         # L√≥gica de estado personalizada
‚îú‚îÄ‚îÄ services/      # Integra√ß√£o com APIs
‚îú‚îÄ‚îÄ schemas/       # Valida√ß√£o de dados
‚îî‚îÄ‚îÄ pages/         # Rotas e p√°ginas
```

### 2. **üîÑ Separation of Concerns**
- **UI Layer** ‚Üí Componentes React puros
- **Logic Layer** ‚Üí Hooks personalizados  
- **Data Layer** ‚Üí Services e TanStack Query
- **Validation Layer** ‚Üí Schemas Zod

### 3. **‚ö° Performance First**
- **Lazy Loading** ‚Üí Carregamento sob demanda
- **Code Splitting** ‚Üí Bundle otimizado
- **Memoization** ‚Üí React.memo e useMemo
- **Virtualization** ‚Üí Lista grandes otimizadas

### 4. **üîí Type Safety**
- **TypeScript Strict** ‚Üí M√°xima seguran√ßa de tipos
- **Schema Validation** ‚Üí Runtime validation com Zod
- **API Types** ‚Üí Contratos bem definidos

---

## üèõÔ∏è **Arquitetura em Camadas**

### üìä **Diagrama de Camadas**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    üé® PRESENTATION LAYER                ‚îÇ
‚îÇ                  (React Components)                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    üß† BUSINESS LOGIC LAYER              ‚îÇ
‚îÇ                    (Custom Hooks)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    üîÑ STATE MANAGEMENT LAYER            ‚îÇ
‚îÇ                  (TanStack Query)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    üåê DATA ACCESS LAYER                 ‚îÇ
‚îÇ                     (Services)                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    ‚úÖ VALIDATION LAYER                  ‚îÇ
‚îÇ                   (Zod Schemas)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üé® **Presentation Layer**

**Responsabilidade:** Interface do usu√°rio e intera√ß√µes

```tsx
// Exemplo: Componente de apresenta√ß√£o puro
interface ProductCardProps {
  product: Product;
  onEdit: (product: Product) => void;
  onDelete: (id: string) => void;
}

export function ProductCard({ product, onEdit, onDelete }: ProductCardProps) {
  return (
    <Card>
      <CardHeader>
        <CardTitle>{product.name}</CardTitle>
        <CardDescription>{product.description}</CardDescription>
      </CardHeader>
      <CardActions>
        <Button onClick={() => onEdit(product)}>Editar</Button>
        <Button variant="destructive" onClick={() => onDelete(product.id)}>
          Excluir
        </Button>
      </CardActions>
    </Card>
  );
}
```

**Caracter√≠sticas:**
- ‚úÖ Componentes puros (sem side effects)
- ‚úÖ Props bem tipadas
- ‚úÖ Responsabilidade √∫nica
- ‚úÖ Reutiliz√°veis

### üß† **Business Logic Layer**

**Responsabilidade:** L√≥gica de neg√≥cio e estado da aplica√ß√£o

```tsx
// Exemplo: Hook de l√≥gica de neg√≥cio
export function useProducts() {
  // Estado derivado das queries
  const productsQuery = useQuery({
    queryKey: ['products'],
    queryFn: productService.getAll
  });

  // Mutations para a√ß√µes
  const createMutation = useMutation({
    mutationFn: productService.create,
    onSuccess: () => {
      queryClient.invalidateQueries(['products']);
      toast.success('Produto criado com sucesso!');
    },
    onError: (error) => {
      toast.error(`Erro ao criar produto: ${error.message}`);
    }
  });

  const updateMutation = useMutation({
    mutationFn: ({ id, data }: { id: string; data: UpdateProductData }) => 
      productService.update(id, data),
    onSuccess: () => {
      queryClient.invalidateQueries(['products']);
      toast.success('Produto atualizado com sucesso!');
    }
  });

  const deleteMutation = useMutation({
    mutationFn: productService.delete,
    onSuccess: () => {
      queryClient.invalidateQueries(['products']);
      toast.success('Produto exclu√≠do com sucesso!');
    }
  });

  // API simplificada para componentes
  return {
    // Estado
    products: productsQuery.data ?? [],
    isLoading: productsQuery.isLoading,
    error: productsQuery.error,

    // A√ß√µes
    createProduct: createMutation.mutate,
    updateProduct: updateMutation.mutate,
    deleteProduct: deleteMutation.mutate,

    // Status das a√ß√µes
    isCreating: createMutation.isLoading,
    isUpdating: updateMutation.isLoading,
    isDeleting: deleteMutation.isLoading
  };
}
```

**Caracter√≠sticas:**
- ‚úÖ Encapsula l√≥gica complexa
- ‚úÖ Interface simples para UI
- ‚úÖ Gerencia side effects
- ‚úÖ Error handling centralizado

### üîÑ **State Management Layer**

**Responsabilidade:** Cache e sincroniza√ß√£o de dados

```tsx
// Configura√ß√£o do TanStack Query
export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      // Cache por 5 minutos
      staleTime: 5 * 60 * 1000,
      // Retry autom√°tico em caso de erro
      retry: (failureCount, error) => {
        if (error.status === 404) return false;
        return failureCount < 3;
      },
      // Refetch quando janela recebe foco
      refetchOnWindowFocus: false
    },
    mutations: {
      // Retry para mutations cr√≠ticas
      retry: (failureCount, error) => {
        return failureCount < 2 && error.status >= 500;
      }
    }
  }
});

// Provider global
function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <AppRouter />
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  );
}
```

**Caracter√≠sticas:**
- ‚úÖ Cache autom√°tico e inteligente
- ‚úÖ Sincroniza√ß√£o em background
- ‚úÖ Otimistic updates
- ‚úÖ Error boundaries

### üåê **Data Access Layer**

**Responsabilidade:** Comunica√ß√£o com APIs externas

```tsx
// Exemplo: Service bem estruturado
const API_BASE = '/api/products';

export const productService = {
  async getAll(): Promise<Product[]> {
    const response = await fetch(API_BASE);
    if (!response.ok) {
      throw new APIError('Falha ao buscar produtos', response.status);
    }
    return response.json();
  },

  async getById(id: string): Promise<Product> {
    const response = await fetch(`${API_BASE}/${id}`);
    if (!response.ok) {
      if (response.status === 404) {
        throw new NotFoundError(`Produto ${id} n√£o encontrado`);
      }
      throw new APIError('Falha ao buscar produto', response.status);
    }
    return response.json();
  },

  async create(data: CreateProductData): Promise<Product> {
    // Valida√ß√£o antes de enviar
    const validatedData = createProductSchema.parse(data);
    
    const response = await fetch(API_BASE, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(validatedData)
    });

    if (!response.ok) {
      throw new APIError('Falha ao criar produto', response.status);
    }
    
    return response.json();
  }

  // ... outros m√©todos
};

// Classes de erro customizadas
export class APIError extends Error {
  constructor(message: string, public status: number) {
    super(message);
    this.name = 'APIError';
  }
}

export class NotFoundError extends APIError {
  constructor(message: string) {
    super(message, 404);
    this.name = 'NotFoundError';
  }
}
```

**Caracter√≠sticas:**
- ‚úÖ Error handling robusto
- ‚úÖ Valida√ß√£o de entrada
- ‚úÖ Types seguros
- ‚úÖ Logging estruturado

### ‚úÖ **Validation Layer**

**Responsabilidade:** Valida√ß√£o e transforma√ß√£o de dados

```tsx
// Schemas Zod bem estruturados
export const productSchema = z.object({
  id: z.string().uuid(),
  name: z.string().min(1, 'Nome √© obrigat√≥rio').max(100),
  description: z.string().max(500).optional(),
  price: z.number().positive('Pre√ßo deve ser positivo'),
  category: z.enum(['electronics', 'clothing', 'books']),
  status: z.enum(['active', 'inactive']).default('active'),
  tags: z.array(z.string()).default([]),
  createdAt: z.date(),
  updatedAt: z.date()
});

// Schemas derivados
export const createProductSchema = productSchema.omit({
  id: true,
  createdAt: true,
  updatedAt: true
});

export const updateProductSchema = createProductSchema.partial();

// Infer√™ncia de tipos
export type Product = z.infer<typeof productSchema>;
export type CreateProductData = z.infer<typeof createProductSchema>;
export type UpdateProductData = z.infer<typeof updateProductSchema>;

// Valida√ß√£o com transforma√ß√£o
export const productFilterSchema = z.object({
  search: z.string().default(''),
  category: z.enum(['all', 'electronics', 'clothing', 'books']).default('all'),
  status: z.enum(['all', 'active', 'inactive']).default('all'),
  priceRange: z.tuple([z.number(), z.number()]).default([0, 1000]),
  sortBy: z.enum(['name', 'price', 'createdAt']).default('createdAt'),
  sortOrder: z.enum(['asc', 'desc']).default('desc')
});

export type ProductFilters = z.infer<typeof productFilterSchema>;
```

**Caracter√≠sticas:**
- ‚úÖ Valida√ß√£o runtime + compile time
- ‚úÖ Mensagens de erro customizadas
- ‚úÖ Transforma√ß√£o autom√°tica
- ‚úÖ Type inference

---

## üóÇÔ∏è **Estrutura de Diret√≥rios Detalhada**

### üìÅ **Frontend Structure**

```
src/
‚îú‚îÄ‚îÄ üéØ features/                    # Features modulares
‚îÇ   ‚îú‚îÄ‚îÄ records/                    # Feature de registros
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/             # Componentes da feature
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecordsTable.tsx   # Tabela principal
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecordModal.tsx    # Modal de cria√ß√£o/edi√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecordCard.tsx     # Card individual
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts           # Barrel export
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/                  # Hooks espec√≠ficos
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useRecords.ts      # Hook principal
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useRecordFilters.ts # Hook de filtros
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/               # APIs da feature
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ record.service.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/                # Valida√ß√£o da feature
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ record.schemas.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/                  # P√°ginas da feature
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RecordsPage.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts               # Export principal
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ products/                   # Exemplo de nova feature
‚îÇ       ‚îî‚îÄ‚îÄ [mesma estrutura]
‚îÇ
‚îú‚îÄ‚îÄ üîó shared/                      # Recursos compartilhados
‚îÇ   ‚îú‚îÄ‚îÄ components/                 # Componentes reutiliz√°veis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                    # Componentes b√°sicos (shadcn)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modal.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/                # Componentes de layout
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Footer.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filters/               # Componentes de filtro
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ModernCalendar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchInput.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StatusFilter.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ animations/            # Componentes animados
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnimatedBox.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnimatedList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnimatedTableRow.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ feedback/              # Feedback ao usu√°rio
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Toast.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ LoadingSpinner.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ErrorBoundary.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                     # Hooks reutiliz√°veis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useLocalStorage.ts     # Hook de localStorage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useDebounce.ts         # Hook de debounce
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useKeyboard.ts         # Hook de atalhos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useMediaQuery.ts       # Hook responsivo
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/                       # Utilit√°rios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts               # Utilit√°rios gerais (cn, etc)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts           # Constantes globais
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.ts          # Validadores comuns
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatters.ts          # Formatadores (data, moeda)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api-client.ts          # Cliente HTTP configurado
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ types/                     # Tipos globais
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.types.ts           # Tipos de API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common.types.ts        # Tipos comuns
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route.types.ts         # Tipos de rota
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ styles/                    # Estilos globais
‚îÇ       ‚îú‚îÄ‚îÄ globals.css            # CSS global
‚îÇ       ‚îú‚îÄ‚îÄ components.css         # CSS de componentes
‚îÇ       ‚îî‚îÄ‚îÄ animations.css         # CSS de anima√ß√µes
‚îÇ
‚îú‚îÄ‚îÄ üõ£Ô∏è routes/                      # Sistema de rotas
‚îÇ   ‚îú‚îÄ‚îÄ __root.tsx                # Layout raiz
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx                  # P√°gina inicial
‚îÇ   ‚îú‚îÄ‚îÄ records/                   # Rotas de registros
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx             # /records
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ $recordId.tsx         # /records/$recordId
‚îÇ   ‚îú‚îÄ‚îÄ comunicacoes.tsx           # Redirection route
‚îÇ   ‚îî‚îÄ‚îÄ _layout/                   # Layouts compartilhados
‚îÇ       ‚îî‚îÄ‚îÄ dashboard.tsx
‚îÇ
‚îú‚îÄ‚îÄ üåê locales/                    # Internacionaliza√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ pt-BR/                    # Portugu√™s brasileiro
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common.json           # Textos comuns
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ records.json          # Textos de registros
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.json           # Mensagens de erro
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.json       # Mensagens de valida√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ en-US/                    # Ingl√™s americano
‚îÇ       ‚îî‚îÄ‚îÄ [mesmos arquivos]
‚îÇ
‚îú‚îÄ‚îÄ üì± App.tsx                     # Componente raiz
‚îú‚îÄ‚îÄ üöÄ main.tsx                    # Entry point
‚îî‚îÄ‚îÄ üåç vite-env.d.ts              # Tipos do Vite
```

### üìä **Fluxo de Dados**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   User      ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Component   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Hook      ‚îÇ
‚îÇ Interaction ‚îÇ    ‚îÇ   (UI)       ‚îÇ    ‚îÇ (Logic)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                              ‚îÇ
                                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  External   ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÇ   Service    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÇ TanStack    ‚îÇ
‚îÇ    API      ‚îÇ    ‚îÇ (Data Layer) ‚îÇ    ‚îÇ   Query     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                              ‚îÇ
                                              ‚ñº
                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                         ‚îÇ      Cache & State          ‚îÇ
                         ‚îÇ    Management Layer         ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚öôÔ∏è **Configura√ß√µes e Build**

### üîß **Vite Configuration**

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [
    react(),
    TanStackRouterVite(),
    // Plugin para an√°lise de bundle
    bundleAnalyzer({
      analyzerMode: process.env.ANALYZE ? 'server' : 'disabled'
    })
  ],
  
  // Otimiza√ß√µes de build
  build: {
    // Code splitting por feature
    rollupOptions: {
      output: {
        manualChunks: {
          // Vendor chunks
          react: ['react', 'react-dom'],
          router: ['@tanstack/react-router'],
          query: ['@tanstack/react-query'],
          
          // Feature chunks
          records: ['./src/features/records'],
          shared: ['./src/shared']
        }
      }
    },
    
    // Otimiza√ß√£o de assets
    assetsInlineLimit: 4096,
    
    // Source maps para produ√ß√£o
    sourcemap: true
  },
  
  // Configura√ß√£o do dev server
  server: {
    port: 3002,
    open: true,
    // Proxy para API local
    proxy: {
      '/api': {
        target: 'http://localhost:3001',
        changeOrigin: true
      }
    }
  },
  
  // Path aliases
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      '@shared': path.resolve(__dirname, './src/shared'),
      '@features': path.resolve(__dirname, './src/features')
    }
  }
});
```

### üì¶ **TypeScript Configuration**

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2023", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    
    // Strict type checking
    "strict": true,
    "noImplicitAny": true,
    "noImplicitReturns": true,
    "noImplicitThis": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    
    // Module system
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    
    // JSX
    "jsx": "react-jsx",
    
    // Path mapping
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@shared/*": ["./src/shared/*"],
      "@features/*": ["./src/features/*"]
    }
  },
  "include": [
    "src",
    "vite-env.d.ts"
  ],
  "exclude": [
    "node_modules",
    "dist",
    "coverage"
  ]
}
```

### üé® **Tailwind Configuration**

```javascript
// tailwind.config.js
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}"
  ],
  
  theme: {
    extend: {
      // Design system colors
      colors: {
        border: "hsl(var(--border))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))"
        },
        
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))"
        }
      },
      
      // Custom animations
      animation: {
        "fade-in": "fadeIn 0.2s ease-in-out",
        "slide-in": "slideIn 0.3s ease-out",
        "scale-in": "scaleIn 0.2s ease-out"
      },
      
      keyframes: {
        fadeIn: {
          "0%": { opacity: "0" },
          "100%": { opacity: "1" }
        },
        slideIn: {
          "0%": { transform: "translateY(10px)", opacity: "0" },
          "100%": { transform: "translateY(0)", opacity: "1" }
        },
        scaleIn: {
          "0%": { transform: "scale(0.95)", opacity: "0" },
          "100%": { transform: "scale(1)", opacity: "1" }
        }
      }
    }
  },
  
  plugins: [
    require("tailwindcss-animate"),
    require("@tailwindcss/forms"),
    require("@tailwindcss/typography")
  ]
}
```

---

## üîÑ **Padr√µes de Estado e Fluxo**

### üìä **State Management Patterns**

#### **1. Local State (useState)**
```tsx
// Para estado simples e isolado
function ProductForm() {
  const [isOpen, setIsOpen] = useState(false);
  const [currentStep, setCurrentStep] = useState(1);
  
  // L√≥gica simples local
}
```

#### **2. Form State (react-hook-form)**
```tsx
// Para formul√°rios complexos
function ProductForm() {
  const form = useForm<CreateProductData>({
    resolver: zodResolver(createProductSchema),
    defaultValues: {
      name: '',
      description: '',
      price: 0,
      category: 'electronics',
      status: 'active',
      tags: []
    }
  });
  
  const onSubmit = form.handleSubmit((data) => {
    createProduct(data);
  });
}
```

#### **3. Server State (TanStack Query)**
```tsx
// Para dados do servidor
function useProducts() {
  return useQuery({
    queryKey: ['products'],
    queryFn: productService.getAll,
    // Configura√ß√µes de cache
    staleTime: 5 * 60 * 1000, // 5 minutos
    // Configura√ß√µes de refetch
    refetchOnWindowFocus: false
  });
}
```

#### **4. Global State (Context quando necess√°rio)**
```tsx
// Para estado global espec√≠fico
const ThemeContext = createContext<{
  theme: 'light' | 'dark';
  setTheme: (theme: 'light' | 'dark') => void;
}>();

export function ThemeProvider({ children }: { children: ReactNode }) {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');
  
  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}
```

### üîÑ **Data Flow Patterns**

#### **1. Optimistic Updates**
```tsx
const updateMutation = useMutation({
  mutationFn: productService.update,
  
  // Update otimista
  onMutate: async (newProduct) => {
    await queryClient.cancelQueries(['products']);
    
    const previousProducts = queryClient.getQueryData(['products']);
    
    queryClient.setQueryData(['products'], (old: Product[]) =>
      old.map(product => 
        product.id === newProduct.id 
          ? { ...product, ...newProduct.data }
          : product
      )
    );
    
    return { previousProducts };
  },
  
  // Rollback em caso de erro
  onError: (err, newProduct, context) => {
    queryClient.setQueryData(['products'], context?.previousProducts);
  },
  
  // Sempre refetch ap√≥s sucesso/erro
  onSettled: () => {
    queryClient.invalidateQueries(['products']);
  }
});
```

#### **2. Background Sync**
```tsx
// Sincroniza√ß√£o em background
const { data: products } = useQuery({
  queryKey: ['products'],
  queryFn: productService.getAll,
  
  // Refetch em intervalos
  refetchInterval: 30 * 1000, // 30 segundos
  
  // Refetch quando volta online
  refetchOnReconnect: true,
  
  // Refetch quando janela recebe foco
  refetchOnWindowFocus: true
});
```

---

## üöÄ **Performance e Otimiza√ß√µes**

### ‚ö° **Code Splitting Strategies**

#### **1. Route-based Splitting**
```tsx
// Lazy loading de rotas
const RecordsPage = lazy(() => import('@features/records/pages/RecordsPage'));
const ProductsPage = lazy(() => import('@features/products/pages/ProductsPage'));

// No router
const router = createRouter({
  routeTree,
  // Lazy loading autom√°tico
  defaultPendingComponent: () => <div>Loading...</div>
});
```

#### **2. Component-based Splitting**
```tsx
// Lazy loading de componentes pesados
const HeavyChart = lazy(() => import('./HeavyChart'));

function Dashboard() {
  const [showChart, setShowChart] = useState(false);
  
  return (
    <div>
      <Button onClick={() => setShowChart(true)}>
        Show Chart
      </Button>
      
      {showChart && (
        <Suspense fallback={<ChartSkeleton />}>
          <HeavyChart />
        </Suspense>
      )}
    </div>
  );
}
```

### üéØ **Render Optimization**

#### **1. React.memo for Pure Components**
```tsx
// Memoiza√ß√£o de componentes puros
export const ProductCard = memo(function ProductCard({ 
  product, 
  onEdit, 
  onDelete 
}: ProductCardProps) {
  return (
    <Card>
      {/* ... */}
    </Card>
  );
}, (prevProps, nextProps) => {
  // Custom comparison se necess√°rio
  return prevProps.product.id === nextProps.product.id &&
         prevProps.product.updatedAt === nextProps.product.updatedAt;
});
```

#### **2. useMemo for Expensive Calculations**
```tsx
function ProductList({ products, filters }: ProductListProps) {
  // Filtros e ordena√ß√£o memoizados
  const filteredProducts = useMemo(() => {
    return products
      .filter(product => {
        if (filters.search) {
          return product.name.toLowerCase().includes(filters.search.toLowerCase());
        }
        return true;
      })
      .filter(product => {
        if (filters.category !== 'all') {
          return product.category === filters.category;
        }
        return true;
      })
      .sort((a, b) => {
        const aValue = a[filters.sortBy];
        const bValue = b[filters.sortBy];
        
        if (filters.sortOrder === 'asc') {
          return aValue > bValue ? 1 : -1;
        }
        return aValue < bValue ? 1 : -1;
      });
  }, [products, filters]);
  
  return (
    <div>
      {filteredProducts.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}
```

#### **3. useCallback for Event Handlers**
```tsx
function ProductList({ products }: ProductListProps) {
  const [selectedId, setSelectedId] = useState<string>();
  
  // Callback memoizado para evitar re-renders
  const handleProductClick = useCallback((productId: string) => {
    setSelectedId(productId);
    // L√≥gica adicional...
  }, []);
  
  return (
    <div>
      {products.map(product => (
        <ProductCard 
          key={product.id} 
          product={product}
          onClick={handleProductClick}
        />
      ))}
    </div>
  );
}
```

### üìä **Bundle Analysis**

```bash
# Analisar bundle size
npm run build:analyze

# Lighthouse CI para performance
npm run lighthouse

# Bundle visualizer
npm run analyze
```

---

## üîí **Seguran√ßa e Boas Pr√°ticas**

### üõ°Ô∏è **Type Safety**

```tsx
// Tipos rigorosos em toda aplica√ß√£o
interface APIResponse<T> {
  data: T;
  status: 'success' | 'error';
  message?: string;
  errors?: Record<string, string[]>;
}

// Generic type para APIs
async function apiRequest<T>(
  url: string, 
  options?: RequestInit
): Promise<APIResponse<T>> {
  const response = await fetch(url, options);
  
  if (!response.ok) {
    throw new APIError(
      `API Error: ${response.status}`, 
      response.status
    );
  }
  
  return response.json();
}

// Uso com type safety
const products = await apiRequest<Product[]>('/api/products');
//    ^? APIResponse<Product[]>
```

### üîê **Input Validation**

```tsx
// Valida√ß√£o rigorosa com Zod
const userInputSchema = z.object({
  // Sanitiza√ß√£o de strings
  name: z.string()
    .min(1, 'Nome obrigat√≥rio')
    .max(100, 'Nome muito longo')
    .trim()
    .transform(val => val.replace(/[<>]/g, '')), // Remove HTML
    
  email: z.string()
    .email('Email inv√°lido')
    .toLowerCase(),
    
  // Valida√ß√£o de n√∫meros
  age: z.number()
    .int('Idade deve ser inteira')
    .min(0, 'Idade deve ser positiva')
    .max(150, 'Idade inv√°lida'),
    
  // Valida√ß√£o de arrays
  tags: z.array(z.string().max(50))
    .max(10, 'M√°ximo 10 tags')
    .default([]),
    
  // Enums para valores controlados
  role: z.enum(['admin', 'user', 'guest']).default('user')
});
```

### üö® **Error Boundaries**

```tsx
// Error boundary global
export class GlobalErrorBoundary extends Component<
  { children: ReactNode },
  { hasError: boolean; error?: Error }
> {
  constructor(props: { children: ReactNode }) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    // Log para servi√ßo de monitoramento
    console.error('Global Error:', error, errorInfo);
    
    // Enviar para servi√ßo de erro (Sentry, etc)
    if (process.env.NODE_ENV === 'production') {
      // errorReportingService.report(error, errorInfo);
    }
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="error-boundary">
          <h2>Oops! Algo deu errado</h2>
          <details>
            <summary>Detalhes do erro</summary>
            <pre>{this.state.error?.message}</pre>
          </details>
          <Button onClick={() => this.setState({ hasError: false })}>
            Tentar novamente
          </Button>
        </div>
      );
    }

    return this.props.children;
  }
}
```

---

## üìà **Monitoramento e Observabilidade**

### üìä **Performance Metrics**

```tsx
// Hook para medir performance
export function usePerformanceMonitor(componentName: string) {
  useEffect(() => {
    const startTime = performance.now();
    
    return () => {
      const endTime = performance.now();
      const renderTime = endTime - startTime;
      
      if (renderTime > 16) { // Mais que 1 frame
        console.warn(`Slow render: ${componentName} took ${renderTime}ms`);
      }
      
      // Enviar m√©tricas para servi√ßo de monitoramento
      if (process.env.NODE_ENV === 'production') {
        // analytics.track('component_render_time', {
        //   component: componentName,
        //   renderTime
        // });
      }
    };
  });
}

// Uso no componente
function ExpensiveComponent() {
  usePerformanceMonitor('ExpensiveComponent');
  
  return <div>{/* ... */}</div>;
}
```

### üîç **Error Tracking**

```tsx
// Service de error tracking
export const errorTrackingService = {
  reportError(error: Error, context?: Record<string, any>) {
    const errorData = {
      message: error.message,
      stack: error.stack,
      url: window.location.href,
      userAgent: navigator.userAgent,
      timestamp: new Date().toISOString(),
      context
    };
    
    // Log local para desenvolvimento
    if (process.env.NODE_ENV === 'development') {
      console.error('Error tracked:', errorData);
    }
    
    // Enviar para servi√ßo em produ√ß√£o
    if (process.env.NODE_ENV === 'production') {
      fetch('/api/errors', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(errorData)
      }).catch(console.error);
    }
  }
};

// Hook para tracking autom√°tico
export function useErrorTracking() {
  useEffect(() => {
    const handleUnhandledError = (event: ErrorEvent) => {
      errorTrackingService.reportError(
        new Error(event.message),
        { source: 'unhandled_error' }
      );
    };
    
    const handleUnhandledRejection = (event: PromiseRejectionEvent) => {
      errorTrackingService.reportError(
        new Error(String(event.reason)),
        { source: 'unhandled_promise_rejection' }
      );
    };
    
    window.addEventListener('error', handleUnhandledError);
    window.addEventListener('unhandledrejection', handleUnhandledRejection);
    
    return () => {
      window.removeEventListener('error', handleUnhandledError);
      window.removeEventListener('unhandledrejection', handleUnhandledRejection);
    };
  }, []);
}
```

---

## üéØ **Conclus√£o Arquitetural**

### ‚úÖ **Benef√≠cios da Arquitetura**

1. **üèóÔ∏è Escalabilidade**
   - Features modulares e independentes
   - Code splitting autom√°tico
   - Bundle optimization

2. **üîß Manutenibilidade**
   - Separa√ß√£o clara de responsabilidades
   - Padr√µes consistentes
   - Documenta√ß√£o abrangente

3. **‚ö° Performance**
   - Lazy loading estrat√©gico
   - Memoiza√ß√£o inteligente
   - Cache otimizado

4. **üîí Confiabilidade**
   - Type safety rigorosa
   - Error boundaries robustos
   - Valida√ß√£o abrangente

5. **üë• Developer Experience**
   - Tooling moderno
   - Hot reload r√°pido
   - Debugging facilitado

### üöÄ **Evolutividade**

A arquitetura foi projetada para:
- ‚úÖ **Adi√ß√£o f√°cil de novas features**
- ‚úÖ **Migra√ß√£o incremental de tecnologias**
- ‚úÖ **Scaling horizontal de equipes**
- ‚úÖ **Integration com sistemas externos**

---

<div align="center">
  <p><strong>üèóÔ∏è Arquitetura s√≥lida, flex√≠vel e moderna</strong></p>
  <p><em>Preparada para crescimento e evolu√ß√£o cont√≠nua</em></p>
</div>
